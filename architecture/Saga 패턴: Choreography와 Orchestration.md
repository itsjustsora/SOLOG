# Saga 패턴: Choreography와 Orchestration

## 날짜
- 2026-02-10

## 🎯 오늘의 주제
- Saga 패턴의 두 가지 구성 방식인 **Choreography**와 **Orchestration** 이해
- 두 방식의 구조적 차이를 비교하고, 상황에 따른 선택 기준 정리

---

## 1. Saga Choreography 개요

Saga Choreography는 **이벤트 중심(Event-driven)** 으로 Saga 흐름을 구성하는 방식이다.

### 1-1. 특징
- 중앙에서 흐름을 제어하는 컴포넌트가 없다.
- 각 서비스는 자신이 구독한 이벤트에 반응하여 다음 작업을 수행한다.
- 전체 흐름은 이벤트의 연쇄로 자연스럽게 이어진다.

### 1-2. 구조적 관점
- 서비스 간 직접 호출이 없다.
- 이벤트 브로커(MQ)를 통해 느슨하게 연결된다.
- 각 서비스는 다음에 무엇을 할지만 알고 있다.

---

## 2. Saga Orchestration 개요

Saga Orchestration은 **중앙 오케스트레이터**가 전체 Saga 흐름을 제어하는 방식이다.

### 2-1. 특징
- 하나의 오케스트레이터가 Saga의 시작과 종료를 관리한다.
- 각 서비스는 오케스트레이터의 명령에 따라 작업을 수행한다.
- 성공/실패 및 보상 흐름이 중앙에서 명시적으로 정의된다.

### 2-2. 구조적 관점
- 전체 흐름이 한 곳에 모여 있어 가시성이 높다.
- 서비스는 상대적으로 단순해진다.
- 오케스트레이터에 책임이 집중된다.

---

## 3. 두 방식의 핵심 차이

| 비교 항목 | Choreography | Orchestration |
|---------|-------------|---------------|
| 흐름 제어 | 이벤트 연쇄 | 중앙 오케스트레이터 |
| 흐름 가시성 | 낮음 | 높음 |
| 서비스 결합도 | 낮음 | 상대적으로 높음 |
| 로직 위치 | 각 서비스 분산 | 중앙 집중 |
| 운영 난이도 | 서비스 수 증가 시 급격히 상승 | 오케스트레이터 복잡도 증가 |
| 확장성 | 서비스 추가는 비교적 용이 | 흐름 변경 시 오케스트레이터 수정 필요 |

---

## 4. 설계 관점에서의 고려 사항

### 4-1. Choreography가 적합한 경우
- 서비스 간 결합도를 최대한 낮추고 싶은 경우
- 단순한 이벤트 흐름으로도 충분한 경우
- 중앙 제어 컴포넌트를 두고 싶지 않은 경우

### 4-2. Orchestration이 적합한 경우
- 비즈니스 흐름이 명확하고 복잡한 경우
- 실패 및 보상 로직을 한눈에 파악해야 하는 경우
- 운영 및 디버깅 가시성이 중요한 경우

---

## 5. 고민해볼 질문

- 우리 팀의 현재 서비스 구조에서는 어떤 방식이 더 적합한가?
- 서비스 수가 계속 늘어날 때, 흐름을 **각 서비스에 분산**시키는 것이 나을까, 아니면 **중앙에서 통제**하는 것이 나을까?
- 장애 발생 시 원인을 더 빨리 파악할 수 있는 방식은 무엇인가?
